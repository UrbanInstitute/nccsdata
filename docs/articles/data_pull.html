<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nccsdata">
<title>Legacy Data Downloads With nccsdata â€¢ nccsdata</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Legacy Data Downloads With nccsdata">
<meta property="og:description" content="nccsdata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nccsdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data_pull.html">Legacy Data Downloads With nccsdata</a>
    <a class="dropdown-item" href="../articles/ntee.html">Parsing NTEE Codes With nccsdata</a>
    <a class="dropdown-item" href="../articles/summary_stats.html">Summarising nccsdata</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Thiyaghessan/nccsdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Legacy Data Downloads With nccsdata</h1>
            
            <h4 data-toc-skip class="date">October 16 2023</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Thiyaghessan/nccsdata/blob/HEAD/vignettes/data_pull.Rmd" class="external-link"><code>vignettes/data_pull.Rmd</code></a></small>
      <div class="d-none name"><code>data_pull.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The<code><a href="../reference/get_data.html">get_data()</a></code> function from <a href="https://urbaninstitute.github.io/nccsdata/" class="external-link"><code>nccsdata</code></a>
downloads NCCS legacy data sets hosted on publicly accessible S3 buckets
and processes them for the user.</p>
<p>In this vignette, we provide several examples of how this function
can be used to retrieve this legacy data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Thiyaghessan/nccsdata" class="external-link">nccsdata</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="downloading-core-data">Downloading Core Data<a class="anchor" aria-label="anchor" href="#downloading-core-data"></a>
</h2>
<p>We can define the type of data, range of data (in years),
organization type, and form type using the arguments
<code>dsname</code>, <code>time</code>, <code>scope.formtype</code>, and
<code>scope.orgtpye</code> respectively.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dsname <span class="op">=</span> <span class="st">"core"</span>,</span>
<span>                 time <span class="op">=</span> <span class="st">"2015"</span>,</span>
<span>                 scope.orgtype <span class="op">=</span> <span class="st">"NONPROFIT"</span>,</span>
<span>                 scope.formtype <span class="op">=</span> <span class="st">"PZ"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Valid inputs detected. Retrieving data.</span></span>
<span><span class="co">#&gt; Downloading core data</span></span>
<span><span class="co">#&gt; Requested files have a total size of 115 MB. Proceed</span></span>
<span><span class="co">#&gt;                       with download? Enter Y/N (Yes/no/cancel)</span></span>
<span><span class="co">#&gt; Core data downloaded</span></span></code></pre></div>
<p>The function downloads NCCS core data from the year 2015 for all
non-profits that file both full 990s and 990EZs. Other possible argument
values are:</p>
<ul>
<li>
<code>scope.orgtype</code>
<ul>
<li>
<code>CHARITIES</code>: All charities</li>
<li>
<code>NONPROFIT</code>: All nonprofits</li>
<li>
<code>PRIVFOUND</code>: All private foundations</li>
</ul>
</li>
<li>
<code>scope.formtype</code>
<ul>
<li>
<code>PC</code>: Nonprofits that file the full IRS Form 990</li>
<li>
<code>EZ</code>: Nonprofits that file 990EZs only</li>
<li>
<code>PZ</code>: Nonprofits that file both full Form 990s and
990EZs</li>
<li>
<code>PF</code>: Private foundation filings</li>
</ul>
</li>
</ul>
<p>The data is available from the years 1989 to 2019.
<code><a href="../reference/get_data.html">get_data()</a></code> also provides prompts with the size of the
requested data downloads. These can be muted by [xxx].</p>
</div>
<div class="section level2">
<h2 id="filtering-data-using-ntee-codes">Filtering data using NTEE codes<a class="anchor" aria-label="anchor" href="#filtering-data-using-ntee-codes"></a>
</h2>
<p>We can also pull only a subset of the data based on NTEE
classifications using the various <code>ntee</code> associated arguments
in <code><a href="../reference/get_data.html">get_data()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core_art</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dsname <span class="op">=</span> <span class="st">"core"</span>,</span>
<span>                     time <span class="op">=</span> <span class="st">"2015"</span>,</span>
<span>                     scope.orgtype <span class="op">=</span> <span class="st">"NONPROFIT"</span>,</span>
<span>                     scope.formtype <span class="op">=</span> <span class="st">"PZ"</span>,</span>
<span>                     ntee <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ART"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Valid inputs detected. Retrieving data.</span></span>
<span><span class="co">#&gt; Collecting Matching Industry Groups</span></span>
<span><span class="co">#&gt; Collecting Matching Industry Division and Subdivisions</span></span>
<span><span class="co">#&gt; Collecting Matching Organization Types</span></span>
<span><span class="co">#&gt; Downloading core data</span></span>
<span><span class="co">#&gt; Requested files have a total size of 115 MB. Proceed</span></span>
<span><span class="co">#&gt;                       with download? Enter Y/N (Yes/no/cancel)</span></span>
<span><span class="co">#&gt; Core data downloaded</span></span></code></pre></div>
<p>In the above code snippet, we pull the same dataset but only select
rows belonging to nonprofits involved in the Arts, Culture and
Humanities. A full description of NTEE codes is available <a href="https://github.com/Nonprofit-Open-Data-Collective/mission-taxonomies/blob/main/NTEE-disaggregated/README.md" class="external-link">here</a>.
These descriptions can also be accessed using
<code>preview_ntee()</code>.</p>
</div>
<div class="section level2">
<h2 id="filtering-data-by-geography">Filtering Data By Geography<a class="anchor" aria-label="anchor" href="#filtering-data-by-geography"></a>
</h2>
<p>We can subset the data by geographic units with the <code>geo</code>
arguments from <code><a href="../reference/get_data.html">get_data()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core_NYC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dsname <span class="op">=</span> <span class="st">"core"</span>,</span>
<span>                     time <span class="op">=</span> <span class="st">"2015"</span>,</span>
<span>                     scope.orgtype <span class="op">=</span> <span class="st">"NONPROFIT"</span>,</span>
<span>                     scope.formtype <span class="op">=</span> <span class="st">"PZ"</span>,</span>
<span>                     geo.state <span class="op">=</span> <span class="st">"NY"</span>,</span>
<span>                     geo.city <span class="op">=</span> <span class="st">"New York City"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Valid inputs detected. Retrieving data.</span></span>
<span><span class="co">#&gt; Downloading core data</span></span>
<span><span class="co">#&gt; Requested files have a total size of 115 MB. Proceed</span></span>
<span><span class="co">#&gt;                       with download? Enter Y/N (Yes/no/cancel)</span></span>
<span><span class="co">#&gt; Core data downloaded</span></span></code></pre></div>
<p>The code above returns rows belonging to Nonprofits from New York
City, NY. Additional arguments <code>geo</code> arguments can be used to
subset the data by county (<code>geo.county</code>) and region
(<code>geo.region</code>).</p>
</div>
<div class="section level2">
<h2 id="appending-bmf-data-to-core-data">Appending BMF Data to Core Data<a class="anchor" aria-label="anchor" href="#appending-bmf-data-to-core-data"></a>
</h2>
<p><code><a href="../reference/get_data.html">get_data()</a></code> automatically appends NTEE metadata to the
requested data set. Appending metadata from the IRS Business Master File
(BMF) requires the downloading of an additional download of 185 MB and
can be toggled on/off with <code>append_bmf</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corebmf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dsname <span class="op">=</span> <span class="st">"core"</span>,</span>
<span>                    time <span class="op">=</span> <span class="st">"2015"</span>,</span>
<span>                    scope.orgtype <span class="op">=</span> <span class="st">"NONPROFIT"</span>,</span>
<span>                    scope.formtype <span class="op">=</span> <span class="st">"PZ"</span>,</span>
<span>                    append.bmf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Valid inputs detected. Retrieving data.</span></span>
<span><span class="co">#&gt; Downloading core data</span></span>
<span><span class="co">#&gt; Requested files have a total size of 305 MB. Proceed</span></span>
<span><span class="co">#&gt;                       with download? Enter Y/N (Yes/no/cancel)</span></span>
<span><span class="co">#&gt; Core data downloaded</span></span>
<span><span class="co">#&gt; Downloading bmf data</span></span>
<span><span class="co">#&gt; bmf data downloaded. Appending bmf</span></span></code></pre></div>
<p>BMF metadata is now appended to the downloaded Core data set.</p>
</div>
<div class="section level2">
<h2 id="downloading-bmf-data">Downloading BMF Data<a class="anchor" aria-label="anchor" href="#downloading-bmf-data"></a>
</h2>
<p>The <code>geo</code> and <code>ntee</code> arguments mentioned above
can also be used to download and filter BMF data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bmf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>dsname <span class="op">=</span> <span class="st">"bmf"</span>,</span>
<span>                ntee <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ART"</span><span class="op">)</span>,</span>
<span>                geo.state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CA"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Valid inputs detected. Retrieving data.</span></span>
<span><span class="co">#&gt; Collecting Matching Industry Groups</span></span>
<span><span class="co">#&gt; Collecting Matching Industry Division and Subdivisions</span></span>
<span><span class="co">#&gt; Collecting Matching Organization Types</span></span>
<span><span class="co">#&gt; Requested files have a total size of 190 MB. Proceed</span></span>
<span><span class="co">#&gt;                       with download? Enter Y/N (Yes/no/cancel)</span></span>
<span><span class="co">#&gt; Downloading bmf data</span></span>
<span><span class="co">#&gt; bmf data downloaded</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
