---
title: "Legacy Data Downloads With nccsdata"
date: '`r format(Sys.Date(), "%B %d %Y")`'
output:
  rmarkdown::html_vignette:
    toc: true
    toc_depth: 2
    vignette: >
      %\VignetteIndexEntry{Legacy Data Downloads With nccsdata}
      %\VignetteEngine{knitr::rmarkdown}
      %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.align = "center"
)
```

## Overview

The`get_data()` function from `nccsdata` downloads NCCS legacy data sets hosted
on publicly accessible S3 buckets and processes them for the user.

In this vignette, we provide several examples of how this function can be used
to retrieve this legacy data.

```{r load-data, message = FALSE, warning = FALSE}
library(nccsdata)
```

## Downloading Core Data

We can define the type of data, range of data (in years), organization type,
and form type using the arguments `dsname`, `time`, `scope.formtype`, and 
`scope.orgtpye` respectively.

```{r}
core <- get_data(dsname = "core",
                 time = "2015",
                 scope.orgtype = "NONPROFIT",
                 scope.formtype = "PZ")
```

The function downloads NCCS core data from the year 2015 for all non-profits
that file both full 990s and 990EZs. Other possible argument values are:

* `scope.orgtype`
  + `CHARITIES`: All charities
  + `NONPROFIT`: All nonprofits
  + `PRIVFOUND`: All private foundations
* `scope.formtype`
  + `PC`: Nonprofits that file the full IRS Form 990
  + `EZ`: Nonprofits that file 990EZs only
  + `PZ`: Nonprofits that file both full Form 990s and 990EZs
  + `PF`: Private foundation filings
  
The data is available from the years 1989 to 2019.


## Filtering data using NTEE codes

We can also pull only a subset of the data based on NTEE classifications using
the various `ntee` associated arguments in `get_data`.

```{r}
core_art <- get_data(dsname = "core",
                     time = "2015",
                     scope.orgtype = "NONPROFIT",
                     scope.formtype = "PZ",
                     ntee = c("ART"))
```

In the above code snippet, we pull the same dataset but only select rows 
belonging to nonprofits involved in Art.
